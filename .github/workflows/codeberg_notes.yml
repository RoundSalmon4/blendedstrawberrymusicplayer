      - name: Get Releases from GitHub and Copy to Codeberg
        run: |
          releases=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" "https://api.github.com/repos/${{ github.repository }}/releases")

          echo "$releases" | jq -c '.[] | select(.prerelease == false)' | while read -r release; do
            tag_name=$(echo "$release" | jq -r '.tag_name')
            body=$(echo "$release" | jq -r '.body')

            if [ -z "$tag_name" ]; then
              echo "No tag_name found in release data. Skipping..."
              continue
            fi

            echo "Processing release: $tag_name"
            echo "Release notes body: $body"

            # Check for existing release on Codeberg
            release_check=$(curl -s -H "Authorization: token ${{ secrets.CODEBERG_TOKEN }}" "https://codeberg.org/api/v1/repos/unwanted9855/blended-strawberry/releases/tags/${tag_name}")

            if [[ $(echo "$release_check" | jq -r '.message') == "The target couldn't be found." ]]; then
              echo "Release $tag_name not found on Codeberg. Skipping..."
            else
              echo "Updating release notes for tag: $tag_name"

              # Escaping body properly for safe JSON inclusion
              update_data=$(jq -n --arg body "$body" '{body: $body}')

              echo "Payload for update: $update_data"

              update_response=$(curl -s -X PATCH -H "Authorization: token ${{ secrets.CODEBERG_TOKEN }}" -H "Content-Type: application/json" -d "$update_data" "https://codeberg.org/api/v1/repos/unwanted9855/blended-strawberry/releases/tags/${tag_name}")

              echo "Update response for $tag_name: $update_response"

              # Additional error logging
              if [[ $(echo "$update_response" | jq -r '.message') != null ]]; then
                echo "Error response from Codeberg: $update_response"
              fi
            fi
          done
